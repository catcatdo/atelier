{% extends 'base.html' %}

{% block title %}Manage — Atelier des Poupées{% endblock %}

{% block content %}
<section class="max-w-6xl mx-auto px-4 py-12">
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-10">
        <div>
            <p class="font-display italic text-gold text-sm tracking-[0.2em] mb-1">Administration</p>
            <h1 class="font-heading text-3xl text-charcoal tracking-wide">MANAGE PRODUCTS</h1>
        </div>
        <a href="{% url 'manage_create' %}"
           class="bg-leather text-parchment px-6 py-3 font-heading tracking-[0.15em] text-xs hover:bg-leather-light transition rounded shadow-md">
            + NEW POST
        </a>
    </div>

    {% if products %}
    <div class="bg-white rounded-lg border-double border-4 border-charcoal/10 shadow-lg overflow-hidden">
        <div class="divide-y divide-charcoal/10">
            {% for product in products %}
            <div class="p-5 flex flex-col sm:flex-row items-start sm:items-center gap-4">
                <!-- Image -->
                <div class="w-16 h-16 rounded overflow-hidden flex-shrink-0 border border-charcoal/10">
                    {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}" class="w-full h-full object-cover">
                    {% else %}
                    <div class="w-full h-full bg-charcoal/5 flex items-center justify-center">
                        <span class="text-gold/20 font-heading text-lg">&#10022;</span>
                    </div>
                    {% endif %}
                </div>

                <!-- Info -->
                <div class="flex-1 min-w-0">
                    <div class="flex items-center gap-2 flex-wrap">
                        <h3 class="font-heading text-charcoal text-sm tracking-wide">{{ product.name }}</h3>
                        {% if product.is_featured %}
                        <span class="text-xs bg-gold/10 text-gold px-2 py-0.5 rounded font-heading tracking-wider">FEATURED</span>
                        {% endif %}
                    </div>
                    <p class="text-xs text-charcoal/40 mt-1">
                        {{ product.category.name }} &middot; ${{ product.price }} &middot; Stock: {{ product.stock }} &middot; {{ product.created_at|date:"Y-m-d" }}
                    </p>
                </div>

                <!-- Actions -->
                <div class="flex items-center gap-3">
                    <a href="{% url 'product_detail' product.slug %}"
                       class="text-xs text-charcoal/40 hover:text-gold transition font-heading tracking-wider">VIEW</a>
                    <a href="{% url 'manage_edit' product.pk %}"
                       class="text-xs text-gold hover:text-leather transition font-heading tracking-wider">EDIT</a>
                    <a href="{% url 'manage_delete' product.pk %}"
                       class="text-xs text-velvet hover:text-red-700 transition font-heading tracking-wider">DELETE</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <div class="text-center py-20">
        <span class="text-gold/20 font-heading text-6xl">&#10022;</span>
        <p class="text-charcoal/40 mt-4 font-display italic text-lg">No products yet. Create your first piece.</p>
    </div>
    {% endif %}
</section>
{% endblock %}
